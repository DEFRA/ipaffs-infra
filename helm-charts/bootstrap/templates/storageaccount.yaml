{{- $root := . }}
{{- $blobService := default (dict "containers" (list)) $root.Values.storageAccount.blobService }}

{{- range $blobService.containers }}
---
apiVersion: storage.azure.com/v1api20230101
kind: StorageAccountsBlobServicesContainer
metadata:
  name: {{ . }}
  labels:
    {{- include "ipaffs-common.labels" $root | nindent 4 }}
  annotations:
    serviceoperator.azure.com/reconcile-policy: manage
spec:
  owner:
    name: {{ template "ipaffs-common.azure.storageAccount" $root }}
  publicAccess: None

{{- end }}
